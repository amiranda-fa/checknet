/*! checknet v0.0.1 Tom Riley 29-01-2016 */
var Checknet=function(){var a,b=[window.location.href],c=3e3,d=!0,e=function(a,d){switch(a){case"checkUrls":return"object"!=typeof d?!1:(b=d,!0);case"checkInterval":return"number"!=typeof d?!1:1e3>d?!1:(c=d,!0);default:return!1}},f=function(a){a=a||0;var c=b[a]||window.location.href;c=n(c);var d=new XMLHttpRequest;d.open("HEAD",c,!0),d.onload=function(){m(!0)},d.onerror=function(){return b.length-1>a?void f(a+1):void m(!1)},d.send()},g=function(a,b){return a&&b?void("function"==typeof j[a]&&(j[a]=b)):!1},h=function(){return{conActive:d,checkUrls:b,checkInterval:c}},i=function(){document.addEventListener("visibilitychange",k)},j={dropped:function(){console.log('Connection dropped but no handler set yet. Use Checknet.addEventListener("eventName", "eventHandler") to add. ')},restored:function(){console.log('Connection restored but no handler set yet. Use Checknet.addEventListener("eventName", "eventHandler") to add. ')}},k=function(){document.hidden?clearTimeout(a):l()},l=function(){clearTimeout(a),a=setTimeout(function(){f()},c)},m=function(a){a===!1&&d?j.dropped():a!==!0||d||j.restored(),d=a,l()},n=function(a){var b,c,d=/^[^#?]*(\?[^#]+|)/.exec(a)[1];return b=d?"&":"?",c=a+b+(new Date).getTime()};return i(),{start:f,addEventListener:g,getStatus:h,set:e}}();